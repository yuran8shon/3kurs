<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<title>РК-1. Компьютерная графика.</title>
</head>
<body>
	<h3>Рубежный контроль №1</h1>
	<p><b>Задание 1.</b> Построить отрезок прямой алгоритмом Брезенхема. Отрезок имеет координаты: А(20, 10) В(20+i,100), где i - номер в журнале. </p>
	<canvas id="canvas1" height="200" width="400"></canvas>
	<script>
		var canvas = document.getElementById("canvas1");
		var canv = canvas.getContext("2d");
		var x1 = 20;
		var y1 = 10;
		var variant = 9;
		var x2 = 20 + variant;
		var y2 = 100;
		
		var dx = (x2 - x1 >= 0 ? 1 : -1);
		var dy = (y2 - y1 >= 0 ? 1 : -1);
		var lengthX = Math.abs(x2 - x1);
		var lengthY = Math.abs(y2 - y1);
		var length = Math.max(lengthX, lengthY);
		if (length == 0) 
		{
			canv.fillRect(x1, y1, 1, 1);
		}
		if (lengthY <= lengthX) 
		{
			// Начальные значения
			var x = x1;
			var y = y1;
			var d = -lengthX;
			// Основной цикл
			length++;
			while (length--)
			{
				canv.fillRect(x, y, 1, 1);
				x += dx;
				d += 2 * lengthY;
				if (d > 0) 
				{
					d -= 2 * lengthX;
					y += dy;
				}
			}
		} 
		else 
		{
			// Начальные значения
			var x = x1;
			var y = y1;
			var d = -lengthY;
			// Основной цикл
			length++;
			while (length--) 
			{
				canv.fillRect(x, y, 1, 1);
				y += dy;
				d += 2 * lengthX;
				if (d > 0) 
				{
					d -= 2 * lengthY;
					x += dx;
				}
			}
		}
	</script>

	<p><b>Задание 2.</b> Дан массив х-координат границ многоугольника (задается в коде, например, arr[10, 14, 15, 20, 25]); 
Отобразить в графической части области совокупность горизонтальных отрезков, осуществляющих заливку данного элемента многоугольника. 
Заливка осуществляется от четного элемента (или 0) до нечетного.
Учесть, что повторяющиеся элементы должны продолжаться до пропуска. 
	</p>
	<canvas id="canvas2" height="200" width="400"></canvas>
	<script>
		var canvas = document.getElementById("canvas2");
		var canv = canvas.getContext("2d");
		var array=[	[10, 30, 51, 60, 101],
					[10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 30, 51, 80, 101],
					[10, 57, 69, 77, 80, 101]
					];
		var nn = 0;
		var mm = 0;
		var ptr = 0;
		for (var row=0; row<array.length; row++) 
		{
			nn=0;
			mm=0;
			ptr=0;
		for (var i=0; i<array[row].length-1; i++)
		{
			if (array[row][i] % 2 == 0)
			{
				mm = i+1;
				ptr = mm--;
				while (array[row][mm] - array[row][ptr] == 1)
				{
					mm++;
					ptr++;
				}
				nn = mm+1;
				while (array[row][nn] % 2 == 0)
				{
					nn++;
				}
				for (var j = array[row][i]; j <= array[row][nn]; j++)
				{
					canv.fillRect(j, row, 1, 1);
				}
			}
		}
	}
	</script>
</body>
</html>
